============================= test session starts =============================
platform win32 -- Python 3.14.3, pytest-9.0.2, pluggy-1.6.0 -- C:\Python314\python.exe
cachedir: .pytest_cache
hypothesis profile 'default'
rootdir: C:\Hackathons\ECLearnIX\(Auto AI) Automated Academic Docx Manuscript Formatter\automated-manuscript-formatter\backend
configfile: pytest.ini
plugins: anyio-4.12.1, hypothesis-6.151.5, langsmith-0.6.9, asyncio-1.3.0, cov-7.0.0, mock-3.15.1
asyncio: mode=Mode.STRICT, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 3 items

backend\tests\test_security_verification.py::test_rate_limiting_upload FAILED [ 33%]
backend\tests\test_security_verification.py::test_file_size_limit PASSED [ 66%]
backend\tests\test_security_verification.py::test_cors_headers PASSED    [100%]<unknown>:5: SyntaxWarning: "\d" is an invalid escape sequence. Such sequences will not work in the future. Did you mean "\\d"? A raw string is also an option.
<unknown>:295: SyntaxWarning: "\%" is an invalid escape sequence. Such sequences will not work in the future. Did you mean "\\%"? A raw string is also an option.
C:\Hackathons\ECLearnIX\(Auto AI) Automated Academic Docx Manuscript Formatter\automated-manuscript-formatter\backend\app\pipeline\parsing\tex_parser.py:5: SyntaxWarning: "\d" is an invalid escape sequence. Such sequences will not work in the future. Did you mean "\\d"? A raw string is also an option.
  - Document metadata (\title, \author, \date)
C:\Hackathons\ECLearnIX\(Auto AI) Automated Academic Docx Manuscript Formatter\automated-manuscript-formatter\backend\app\pipeline\parsing\tex_parser.py:295: SyntaxWarning: "\%" is an invalid escape sequence. Such sequences will not work in the future. Did you mean "\\%"? A raw string is also an option.
  """Remove LaTeX comments (starting with %) but keep escaped \%."""
<unknown>:5: SyntaxWarning: "\d" is an invalid escape sequence. Such sequences will not work in the future. Did you mean "\\d"? A raw string is also an option.
<unknown>:295: SyntaxWarning: "\%" is an invalid escape sequence. Such sequences will not work in the future. Did you mean "\\%"? A raw string is also an option.
C:\Hackathons\ECLearnIX\(Auto AI) Automated Academic Docx Manuscript Formatter\automated-manuscript-formatter\backend\app\pipeline\parsing\tex_parser.py:5: SyntaxWarning: "\d" is an invalid escape sequence. Such sequences will not work in the future. Did you mean "\\d"? A raw string is also an option.
  - Document metadata (\title, \author, \date)
C:\Hackathons\ECLearnIX\(Auto AI) Automated Academic Docx Manuscript Formatter\automated-manuscript-formatter\backend\app\pipeline\parsing\tex_parser.py:295: SyntaxWarning: "\%" is an invalid escape sequence. Such sequences will not work in the future. Did you mean "\\%"? A raw string is also an option.
  """Remove LaTeX comments (starting with %) but keep escaped \%."""
<unknown>:5: SyntaxWarning: "\d" is an invalid escape sequence. Such sequences will not work in the future. Did you mean "\\d"? A raw string is also an option.
<unknown>:295: SyntaxWarning: "\%" is an invalid escape sequence. Such sequences will not work in the future. Did you mean "\\%"? A raw string is also an option.


================================== FAILURES ===================================
__________________________ test_rate_limiting_upload __________________________
backend\tests\test_security_verification.py:25: in test_rate_limiting_upload
    response = client.post("/api/documents/upload", files=files, headers=headers)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Users\Dell\AppData\Roaming\Python\Python314\site-packages\starlette\testclient.py:546: in post
    return super().post(
C:\Users\Dell\AppData\Roaming\Python\Python314\site-packages\httpx\_client.py:1144: in post
    return self.request(
C:\Users\Dell\AppData\Roaming\Python\Python314\site-packages\starlette\testclient.py:445: in request
    return super().request(
C:\Users\Dell\AppData\Roaming\Python\Python314\site-packages\httpx\_client.py:825: in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Users\Dell\AppData\Roaming\Python\Python314\site-packages\httpx\_client.py:914: in send
    response = self._send_handling_auth(
C:\Users\Dell\AppData\Roaming\Python\Python314\site-packages\httpx\_client.py:942: in _send_handling_auth
    response = self._send_handling_redirects(
C:\Users\Dell\AppData\Roaming\Python\Python314\site-packages\httpx\_client.py:979: in _send_handling_redirects
    response = self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Users\Dell\AppData\Roaming\Python\Python314\site-packages\httpx\_client.py:1014: in _send_single_request
    response = transport.handle_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Users\Dell\AppData\Roaming\Python\Python314\site-packages\starlette\testclient.py:348: in handle_request
    raise exc
C:\Users\Dell\AppData\Roaming\Python\Python314\site-packages\starlette\testclient.py:345: in handle_request
    portal.call(self.app, scope, receive, send)
C:\Users\Dell\AppData\Roaming\Python\Python314\site-packages\anyio\from_thread.py:334: in call
    return cast(T_Retval, self.start_task_soon(func, *args).result())
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python314\Lib\concurrent\futures\_base.py:450: in result
    return self.__get_result()
           ^^^^^^^^^^^^^^^^^^^
C:\Python314\Lib\concurrent\futures\_base.py:395: in __get_result
    raise self._exception
C:\Users\Dell\AppData\Roaming\Python\Python314\site-packages\anyio\from_thread.py:259: in _call_func
    retval = await retval_or_awaitable
             ^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Users\Dell\AppData\Roaming\Python\Python314\site-packages\fastapi\applications.py:1135: in __call__
    await super().__call__(scope, receive, send)
C:\Users\Dell\AppData\Roaming\Python\Python314\site-packages\starlette\applications.py:107: in __call__
    await self.middleware_stack(scope, receive, send)
C:\Users\Dell\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py:186: in __call__
    raise exc
C:\Users\Dell\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py:164: in __call__
    await self.app(scope, receive, _send)
C:\Users\Dell\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py:198: in __call__
    raise app_exc
C:\Users\Dell\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py:144: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
C:\Users\Dell\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py:85: in __call__
    await self.app(scope, receive, send)
C:\Users\Dell\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py:63: in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
C:\Users\Dell\AppData\Roaming\Python\Python314\site-packages\starlette\_exception_handler.py:53: in wrapped_app
    raise exc
C:\Users\Dell\AppData\Roaming\Python\Python314\site-packages\starlette\_exception_handler.py:42: in wrapped_app
    await app(scope, receive, sender)
C:\Users\Dell\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py:18: in __call__
    await self.app(scope, receive, send)
C:\Users\Dell\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py:716: in __call__
    await self.middleware_stack(scope, receive, send)
C:\Users\Dell\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py:736: in app
    await route.handle(scope, receive, send)
C:\Users\Dell\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py:290: in handle
    await self.app(scope, receive, send)
C:\Users\Dell\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py:115: in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
C:\Users\Dell\AppData\Roaming\Python\Python314\site-packages\starlette\_exception_handler.py:53: in wrapped_app
    raise exc
C:\Users\Dell\AppData\Roaming\Python\Python314\site-packages\starlette\_exception_handler.py:42: in wrapped_app
    await app(scope, receive, sender)
C:\Users\Dell\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py:102: in app
    await response(scope, receive, send)
C:\Users\Dell\AppData\Roaming\Python\Python314\site-packages\starlette\responses.py:167: in __call__
    await self.background()
C:\Users\Dell\AppData\Roaming\Python\Python314\site-packages\starlette\background.py:36: in __call__
    await task()
C:\Users\Dell\AppData\Roaming\Python\Python314\site-packages\starlette\background.py:21: in __call__
    await self.func(*self.args, **self.kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: run_pipeline_with_timeout() got an unexpected keyword argument 'formatting_options'
---------------------------- Captured stdout call -----------------------------
DEBUG: upload_document received template='none' from request.
------------------------------ Captured log call ------------------------------
WARNING  app.utils.dependencies:dependencies.py:47 Token validation failed in optional auth: HTTPException: 401: Invalid token
WARNING  app.pipeline.services.docling_client:docling_client.py:117 Docling not available - layout analysis will be limited
============================== warnings summary ===============================
..\..\..\..\Users\Dell\AppData\Roaming\Python\Python314\site-packages\pyiceberg\expressions\parser.py:72
  C:\Users\Dell\AppData\Roaming\Python\Python314\site-packages\pyiceberg\expressions\parser.py:72: PyparsingDeprecationWarning: 'enablePackrat' deprecated - use 'enable_packrat'
    ParserElement.enablePackrat()

..\..\..\..\Users\Dell\AppData\Roaming\Python\Python314\site-packages\pyiceberg\expressions\parser.py:85
  C:\Users\Dell\AppData\Roaming\Python\Python314\site-packages\pyiceberg\expressions\parser.py:85: PyparsingDeprecationWarning: 'escChar' argument is deprecated, use 'esc_char'
    quoted_identifier = QuotedString('"', escChar="\\", unquoteResults=True)

..\..\..\..\Users\Dell\AppData\Roaming\Python\Python314\site-packages\pyiceberg\expressions\parser.py:85
  C:\Users\Dell\AppData\Roaming\Python\Python314\site-packages\pyiceberg\expressions\parser.py:85: PyparsingDeprecationWarning: 'unquoteResults' argument is deprecated, use 'unquote_results'
    quoted_identifier = QuotedString('"', escChar="\\", unquoteResults=True)

..\..\..\..\Users\Dell\AppData\Roaming\Python\Python314\site-packages\pyiceberg\table\metadata.py:365
  C:\Users\Dell\AppData\Roaming\Python\Python314\site-packages\pyiceberg\table\metadata.py:365: PydanticDeprecatedSince212: Using `@model_validator` with mode='after' on a classmethod is deprecated. Instead, use an instance method. See the documentation at https://docs.pydantic.dev/2.12/concepts/validators/#model-after-validator. Deprecated in Pydantic V2.12 to be removed in V3.0.
    @model_validator(mode="after")

..\..\..\..\Users\Dell\AppData\Roaming\Python\Python314\site-packages\pyiceberg\table\metadata.py:494
  C:\Users\Dell\AppData\Roaming\Python\Python314\site-packages\pyiceberg\table\metadata.py:494: PydanticDeprecatedSince212: Using `@model_validator` with mode='after' on a classmethod is deprecated. Instead, use an instance method. See the documentation at https://docs.pydantic.dev/2.12/concepts/validators/#model-after-validator. Deprecated in Pydantic V2.12 to be removed in V3.0.
    @model_validator(mode="after")

..\..\..\..\Users\Dell\AppData\Roaming\Python\Python314\site-packages\pyiceberg\table\metadata.py:498
  C:\Users\Dell\AppData\Roaming\Python\Python314\site-packages\pyiceberg\table\metadata.py:498: PydanticDeprecatedSince212: Using `@model_validator` with mode='after' on a classmethod is deprecated. Instead, use an instance method. See the documentation at https://docs.pydantic.dev/2.12/concepts/validators/#model-after-validator. Deprecated in Pydantic V2.12 to be removed in V3.0.
    @model_validator(mode="after")

..\..\..\..\Users\Dell\AppData\Roaming\Python\Python314\site-packages\pyiceberg\table\metadata.py:502
  C:\Users\Dell\AppData\Roaming\Python\Python314\site-packages\pyiceberg\table\metadata.py:502: PydanticDeprecatedSince212: Using `@model_validator` with mode='after' on a classmethod is deprecated. Instead, use an instance method. See the documentation at https://docs.pydantic.dev/2.12/concepts/validators/#model-after-validator. Deprecated in Pydantic V2.12 to be removed in V3.0.
    @model_validator(mode="after")

..\..\..\..\Users\Dell\AppData\Roaming\Python\Python314\site-packages\pyiceberg\table\metadata.py:506
  C:\Users\Dell\AppData\Roaming\Python\Python314\site-packages\pyiceberg\table\metadata.py:506: PydanticDeprecatedSince212: Using `@model_validator` with mode='after' on a classmethod is deprecated. Instead, use an instance method. See the documentation at https://docs.pydantic.dev/2.12/concepts/validators/#model-after-validator. Deprecated in Pydantic V2.12 to be removed in V3.0.
    @model_validator(mode="after")

..\..\..\..\Users\Dell\AppData\Roaming\Python\Python314\site-packages\pyiceberg\table\metadata.py:538
  C:\Users\Dell\AppData\Roaming\Python\Python314\site-packages\pyiceberg\table\metadata.py:538: PydanticDeprecatedSince212: Using `@model_validator` with mode='after' on a classmethod is deprecated. Instead, use an instance method. See the documentation at https://docs.pydantic.dev/2.12/concepts/validators/#model-after-validator. Deprecated in Pydantic V2.12 to be removed in V3.0.
    @model_validator(mode="after")

..\..\..\..\Users\Dell\AppData\Roaming\Python\Python314\site-packages\pyiceberg\table\metadata.py:542
  C:\Users\Dell\AppData\Roaming\Python\Python314\site-packages\pyiceberg\table\metadata.py:542: PydanticDeprecatedSince212: Using `@model_validator` with mode='after' on a classmethod is deprecated. Instead, use an instance method. See the documentation at https://docs.pydantic.dev/2.12/concepts/validators/#model-after-validator. Deprecated in Pydantic V2.12 to be removed in V3.0.
    @model_validator(mode="after")

..\..\..\..\Users\Dell\AppData\Roaming\Python\Python314\site-packages\pyiceberg\table\metadata.py:546
  C:\Users\Dell\AppData\Roaming\Python\Python314\site-packages\pyiceberg\table\metadata.py:546: PydanticDeprecatedSince212: Using `@model_validator` with mode='after' on a classmethod is deprecated. Instead, use an instance method. See the documentation at https://docs.pydantic.dev/2.12/concepts/validators/#model-after-validator. Deprecated in Pydantic V2.12 to be removed in V3.0.
    @model_validator(mode="after")

..\..\..\..\Users\Dell\AppData\Roaming\Python\Python314\site-packages\pyiceberg\table\metadata.py:550
  C:\Users\Dell\AppData\Roaming\Python\Python314\site-packages\pyiceberg\table\metadata.py:550: PydanticDeprecatedSince212: Using `@model_validator` with mode='after' on a classmethod is deprecated. Instead, use an instance method. See the documentation at https://docs.pydantic.dev/2.12/concepts/validators/#model-after-validator. Deprecated in Pydantic V2.12 to be removed in V3.0.
    @model_validator(mode="after")

backend\app\db\base.py:4
  C:\Hackathons\ECLearnIX\(Auto AI) Automated Academic Docx Manuscript Formatter\automated-manuscript-formatter\backend\app\db\base.py:4: MovedIn20Warning: The ``declarative_base()`` function is now available as sqlalchemy.orm.declarative_base(). (deprecated since: 2.0) (Background on SQLAlchemy 2.0 at: https://sqlalche.me/e/b8d9)
    Base = declarative_base()

backend\app\models\block.py:72
  C:\Hackathons\ECLearnIX\(Auto AI) Automated Academic Docx Manuscript Formatter\automated-manuscript-formatter\backend\app\models\block.py:72: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class TextStyle(BaseModel):

backend\app\models\block.py:87
  C:\Hackathons\ECLearnIX\(Auto AI) Automated Academic Docx Manuscript Formatter\automated-manuscript-formatter\backend\app\models\block.py:87: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class Block(BaseModel):

backend\app\models\figure.py:38
  C:\Hackathons\ECLearnIX\(Auto AI) Automated Academic Docx Manuscript Formatter\automated-manuscript-formatter\backend\app\models\figure.py:38: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class Figure(BaseModel):

backend\app\models\table.py:11
  C:\Hackathons\ECLearnIX\(Auto AI) Automated Academic Docx Manuscript Formatter\automated-manuscript-formatter\backend\app\models\table.py:11: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class TableCell(BaseModel):

backend\app\models\table.py:41
  C:\Hackathons\ECLearnIX\(Auto AI) Automated Academic Docx Manuscript Formatter\automated-manuscript-formatter\backend\app\models\table.py:41: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class Table(BaseModel):

backend\app\models\reference.py:38
  C:\Hackathons\ECLearnIX\(Auto AI) Automated Academic Docx Manuscript Formatter\automated-manuscript-formatter\backend\app\models\reference.py:38: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class Reference(BaseModel):

backend\app\main.py:49
  C:\Hackathons\ECLearnIX\(Auto AI) Automated Academic Docx Manuscript Formatter\automated-manuscript-formatter\backend\app\main.py:49: DeprecationWarning: 
          on_event is deprecated, use lifespan event handlers instead.
  
          Read more about it in the
          [FastAPI docs for Lifespan Events](https://fastapi.tiangolo.com/advanced/events/).
          
    @app.on_event("startup")

..\..\..\..\Users\Dell\AppData\Roaming\Python\Python314\site-packages\fastapi\applications.py:4576
  C:\Users\Dell\AppData\Roaming\Python\Python314\site-packages\fastapi\applications.py:4576: DeprecationWarning: 
          on_event is deprecated, use lifespan event handlers instead.
  
          Read more about it in the
          [FastAPI docs for Lifespan Events](https://fastapi.tiangolo.com/advanced/events/).
          
    return self.router.on_event(event_type)

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=============================== tests coverage ================================
_______________ coverage: platform win32, python 3.14.3-final-0 _______________

Name                                                         Stmts   Miss  Cover   Missing
------------------------------------------------------------------------------------------
backend\app\__init__.py                                          0      0   100%
backend\app\config\__init__.py                                   0      0   100%
backend\app\config\logging_config.py                            13     13     0%   6-122
backend\app\config\settings.py                                  24      0   100%
backend\app\db\__init__.py                                       0      0   100%
backend\app\db\base.py                                           2      0   100%
backend\app\db\session.py                                       14      5    64%   11, 28-32
backend\app\main.py                                             87     64    26%   55-101, 105, 113-156
backend\app\middleware\rate_limit.py                            39      4    90%   35, 52, 68, 88
backend\app\models\__init__.py                                  12      0   100%
backend\app\models\block.py                                     73      3    96%   187, 196, 205
backend\app\models\document.py                                  20      0   100%
backend\app\models\document_result.py                           10      0   100%
backend\app\models\document_version.py                          11      0   100%
backend\app\models\equation.py                                  17      2    88%   47, 51
backend\app\models\figure.py                                    54      6    89%   160, 164-168
backend\app\models\pipeline_document.py                         82     19    77%   88-95, 99-102, 106-109, 113-116, 120, 124, 128, 132
backend\app\models\processing_status.py                         12      0   100%
backend\app\models\reference.py                                 70      8    89%   212, 224-230, 234, 238
backend\app\models\review.py                                    12      0   100%
backend\app\models\table.py                                     61     13    79%   179, 183-186, 190-194, 198-200
backend\app\models\user.py                                      11      0   100%
backend\app\pipeline\__init__.py                                 1      0   100%
backend\app\pipeline\agents\__init__.py                          2      2     0%   4-6
backend\app\pipeline\agents\adaptive.py                         53     53     0%   4-157
backend\app\pipeline\agents\advanced_dashboard.py               69     69     0%   4-393
backend\app\pipeline\agents\autoscaling.py                      69     69     0%   4-204
backend\app\pipeline\agents\custom_tools.py                     74     74     0%   4-192
backend\app\pipeline\agents\dashboard.py                        25     25     0%   4-261
backend\app\pipeline\agents\deep_learning.py                    96     96     0%   4-270
backend\app\pipeline\agents\distributed.py                      74     74     0%   4-238
backend\app\pipeline\agents\document_agent.py                  103    103     0%   4-285
backend\app\pipeline\agents\federated_learning.py              135    135     0%   4-370
backend\app\pipeline\agents\llm_factory.py                      66     66     0%   4-145
backend\app\pipeline\agents\memory.py                           83     83     0%   4-216
backend\app\pipeline\agents\metrics.py                          97     97     0%   4-240
backend\app\pipeline\agents\ml_patterns.py                      87     87     0%   4-216
backend\app\pipeline\agents\multi_doc_learning.py               85     85     0%   4-216
backend\app\pipeline\agents\nextgen_dashboard.py                55     55     0%   4-372
backend\app\pipeline\agents\realtime_adaptation.py              62     62     0%   4-206
backend\app\pipeline\agents\streaming.py                        39     39     0%   4-131
backend\app\pipeline\agents\tool_marketplace.py                 90     90     0%   4-304
backend\app\pipeline\base.py                                     6      1    83%   23
backend\app\pipeline\classification\__init__.py                  2      0   100%
backend\app\pipeline\classification\classifier.py              305    287     6%   36-51, 66-377, 386-402, 406-422, 426-427, 440-457, 470-484, 492-517, 531-532
backend\app\pipeline\contracts\loader.py                        29     19    34%   17-31, 37-39, 45-47
backend\app\pipeline\equations\standardizer.py                  62     52    16%   13-28, 32-66, 70-94, 101-103
backend\app\pipeline\export\__init__.py                          2      0   100%
backend\app\pipeline\export\exporter.py                        128    111    13%   21, 25-51, 55-59, 63-71, 75-83, 87-97, 104-120, 124-126, 150-207
backend\app\pipeline\export\jats_generator.py                  101     90    11%   15, 22-38, 47-68, 71-127, 131-156
backend\app\pipeline\export\pdf_exporter.py                     41     32    22%   13, 17-29, 36-80
backend\app\pipeline\figures\__init__.py                         2      0   100%
backend\app\pipeline\figures\caption_matcher.py                111     98    12%   38-58, 70-119, 131-165, 171-181, 190-240, 244-245
backend\app\pipeline\formatting\__init__.py                      3      0   100%
backend\app\pipeline\formatting\formatter.py                   373    336    10%   28-34, 38-41, 47-218, 222-231, 237-246, 250-257, 261-273, 277-289, 299-318, 322-350, 354-375, 379-396, 400-415, 418-425, 431-478, 483-510, 523-559, 564-621, 625-629, 633-637, 641-646
backend\app\pipeline\formatting\numbering.py                    37     31    16%   11, 17-64
backend\app\pipeline\formatting\reference_formatter.py          17     12    29%   9, 13-28
backend\app\pipeline\formatting\section_ordering.py             28     22    21%   10, 16-42
backend\app\pipeline\formatting\style_mapper.py                 13      7    46%   11, 17-27
backend\app\pipeline\formatting\template_renderer.py           102     84    18%   24, 28-33, 37-67, 83-87, 91-100, 103-118, 122-158, 161-166, 169-175
backend\app\pipeline\input_conversion\__init__.py                2      0   100%
backend\app\pipeline\input_conversion\converter.py              97     80    18%   51-101, 108-145, 154-162, 167-183, 187-201
backend\app\pipeline\integrity\cross_ref.py                     32     26    19%   17-20, 27-63
backend\app\pipeline\intelligence\rag_engine.py                103     87    16%   16-67, 71-81, 85-106, 114-126, 129-130, 133-135, 139-146, 153-155
backend\app\pipeline\intelligence\reasoning_engine.py          178    160    10%   11-13, 33-65, 69-73, 77-85, 89-113, 131-196, 201-253, 259-315, 322-324
backend\app\pipeline\intelligence\semantic_parser.py            87     70    20%   16-19, 23-49, 57-61, 68-72, 79-97, 102-116, 123-138, 149-151
backend\app\pipeline\nlp\__init__.py                             0      0   100%
backend\app\pipeline\nlp\analyzer.py                            69     53    23%   13-14, 27-35, 44-73, 77-103, 106, 110-118, 123-133, 138
backend\app\pipeline\normalization\__init__.py                   2      0   100%
backend\app\pipeline\normalization\normalizer.py               166    151     9%   49, 64-106, 119-162, 174-348, 352-354, 362-381, 398-430, 463-500, 524-525
backend\app\pipeline\ocr\__init__.py                             0      0   100%
backend\app\pipeline\ocr\pdf_ocr.py                             43     43     0%   5-89
backend\app\pipeline\orchestrator.py                           395    352    11%   73-74, 81-112, 125-512, 524-640
backend\app\pipeline\orchestrator_v2.py                         88     88     0%   4-238
backend\app\pipeline\parsing\__init__.py                         2      0   100%
backend\app\pipeline\parsing\base_parser.py                      9      2    78%   31, 44
backend\app\pipeline\parsing\html_parser.py                    136    120    12%   20-21, 41-46, 50, 66-110, 114-134, 138-290
backend\app\pipeline\parsing\md_parser.py                      187    171     9%   37-38, 42, 58-103, 107-131, 135-342, 353-392, 397-420
backend\app\pipeline\parsing\parser.py                         376    337    10%   68-73, 77, 94-161, 173-266, 272-299, 311-335, 352-409, 422-464, 468-486, 490-525, 541-578, 598-630, 643-698, 710-722, 735-743, 751-776, 780-804, 825-826, 832, 837, 842
backend\app\pipeline\parsing\parser_factory.py                  58     45    22%   26-66, 82-97, 109-114
backend\app\pipeline\parsing\pdf_parser.py                     186    168    10%   16-17, 37-42, 46, 63-106, 110-123, 134-160, 166-182, 186-386
backend\app\pipeline\parsing\tex_parser.py                     140    124    11%   35, 39, 55-96, 102-122, 127-292, 297, 307-321
backend\app\pipeline\parsing\txt_parser.py                      64     51    20%   32, 36, 52-94, 98-163
backend\app\pipeline\references\__init__.py                      2      0   100%
backend\app\pipeline\references\formatter_engine.py             55     42    24%   30-32, 36-75, 79-113
backend\app\pipeline\references\normalizer.py                   17     12    29%   15-18, 25-34, 41-46
backend\app\pipeline\references\parser.py                       86     73    15%   28-31, 40-78, 84-163, 181-191, 196-197
backend\app\pipeline\services\__init__.py                        5      0   100%
backend\app\pipeline\services\crossref_client.py                77     61    21%   41-45, 49-53, 65-69, 84-101, 114-170
backend\app\pipeline\services\csl_engine.py                    163    136    17%   25-27, 58, 66, 70-89, 95-96, 102-115, 121-140, 144-190, 194-209, 213-216, 219-240, 243-273, 276-282
backend\app\pipeline\services\docling_client.py                159    122    23%   25-28, 38-42, 46, 50, 55, 58, 82-88, 91, 121-134, 138, 158-194, 198-252, 263-299, 303-318, 322-336, 340-345, 349, 372-386
backend\app\pipeline\services\grobid_client.py                 109     87    20%   42-49, 73-99, 111-139, 143-152, 161-197, 201-209, 213-218, 232-255, 259
backend\app\pipeline\structure_detection\__init__.py             2      0   100%
backend\app\pipeline\structure_detection\detector.py           209    190     9%   39-41, 59-118, 132-141, 163-257, 274-301, 319-350, 357-362, 369-381, 400-502, 517-518
backend\app\pipeline\structure_detection\heading_rules.py      151    139     8%   49-81, 92-109, 117-139, 146-178, 188-206, 211-222, 235-370
backend\app\pipeline\structure_detection\position_rules.py      82     73    11%   28-31, 48-69, 85-97, 111-123, 137-144, 166-191, 215-230
backend\app\pipeline\tables\caption_matcher.py                  93     83    11%   31-38, 53-185, 189-197, 201-202
backend\app\pipeline\tables\extractor.py                        85     76    11%   25-137, 141-143, 150-159, 163-167, 171-177
backend\app\pipeline\tables\renderer.py                         45     39    13%   16, 27-91
backend\app\pipeline\validation\__init__.py                      2      0   100%
backend\app\pipeline\validation\ai_explainer.py                 20     16    20%   11, 22-46
backend\app\pipeline\validation\review_manager.py               52     45    13%   14-24, 31-96
backend\app\pipeline\validation\validator.py                   129    103    20%   34-37, 41-42, 48-108, 116-129, 132-139, 142-165, 168-174, 180-222, 227-228
backend\app\routers\__init__.py                                  1      0   100%
backend\app\routers\auth.py                                     24      6    75%   16, 24, 31, 38, 46, 53
backend\app\routers\documents.py                               206    145    30%   35-86, 122, 130, 141, 147, 164, 211-228, 240-288, 300-330, 340-366, 376-438, 450-525
backend\app\routers\metrics.py                                  46     35    24%   25-41, 57-81, 93-115
backend\app\schemas\__init__.py                                  0      0   100%
backend\app\schemas\__init___1.py                                0      0   100%
backend\app\schemas\auth.py                                     21      3    86%   14-16
backend\app\schemas\auth_1.py                                   21     21     0%   1-32
backend\app\schemas\document.py                                  9      9     0%   1-22
backend\app\schemas\document_1.py                                7      7     0%   2-17
backend\app\schemas\user.py                                      9      0   100%
backend\app\schemas\user_1.py                                    9      9     0%   2-14
backend\app\services\__init__.py                                 0      0   100%
backend\app\services\ab_testing.py                              67     67     0%   7-213
backend\app\services\auth_service.py                            61     33    46%   33, 35, 41, 55-62, 66-79, 86-93, 100-106, 113-127, 134-143
backend\app\services\document_service.py                         7      7     0%   2-11
backend\app\services\model_metrics.py                           38     21    45%   70-87, 95, 104, 116, 128-140, 149
backend\app\services\model_store.py                             18     18     0%   1-32
backend\app\services\nvidia_client.py                           50     50     0%   9-183
backend\app\services\user_service.py                            20     20     0%   2-24
backend\app\utils\__init__.py                                    0      0   100%
backend\app\utils\background_tasks.py                           65     55    15%   27-77, 87-97, 109-125
backend\app\utils\dependencies.py                               32     14    56%   19-28, 36, 41-44, 49-52
backend\app\utils\id_generator.py                               14      8    43%   18, 31, 44, 57, 70, 83-85
backend\app\utils\text_utils.py                                 55     41    25%   98-101, 125-147, 163-170, 188-204, 220-235, 253-268
------------------------------------------------------------------------------------------
TOTAL                                                         8094   6677    18%
Coverage HTML written to dir htmlcov
=========================== short test summary info ===========================
FAILED backend\tests\test_security_verification.py::test_rate_limiting_upload - TypeError: run_pipeline_with_timeout() got an unexpected keyword argument 'formatting_options'
================== 1 failed, 2 passed, 21 warnings in 11.91s ==================
